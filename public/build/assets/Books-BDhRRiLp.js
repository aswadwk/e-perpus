import{r as c,W as he,j as t,Y as fe}from"./app-Dcw603Aq.js";import{c as B,B as me,u as R}from"./button-BmzEkud6.js";import{J as $,c as pe,P as I,a as P,u as C,b as be}from"./react-icons.esm-DxiViHu5.js";import{S as ve}from"./Sheet-9jRbdVFy.js";import{C as xe,a as Se,b as we,c as ge,d as Ce}from"./card-DRyluWGU.js";import{L as Pe}from"./label-LcmAh8Cy.js";import{D as je,T as ye,c as Re}from"./tabs-CEQTPwVP.js";import{I as Ee}from"./InputCustom-DqzOVnrW.js";import{I as Te}from"./InputCheckBox-DC4pBx2W.js";import{f as Ae}from"./calendar-BbMZZ4Rp.js";import{B as Ne}from"./BookLayout-lYqh9WuO.js";import{P as _e,a as De}from"./PaginateDemo-BtgI3ZBS.js";import{P as A}from"./input-BIhhn9L1.js";import{u as Le}from"./index-Bt8fx7yK.js";import{S as J}from"./separator-BB9wYaeO.js";import"./popover-C1FF25IY.js";import"./utils-DXcaDM6T.js";import"./checkbox-B2oeJkUQ.js";import"./dialog-iccxMu75.js";function G({book:e,aspectRatio:o="portrait",width:r,height:l,className:n,...s}){var u;const[a,i]=c.useState({borrowBook:!1}),d=he({book_id:"",return_date:new Date,notes:"",fine:!0});async function h(){d.transform(m=>({...m,return_date:Ae(m.return_date,"yyyy-MM-dd")})),d.post(route("web.books.borrow",d.data.book_id),{preserveState:!0,onSuccess:()=>{d.reset(),$.success("Book borrowed successfully"),i({...a,borrowBook:!1})},onError:()=>{$.error("Failed to borrow book")}})}return t.jsxs("div",{className:B("space-y-3",n),...s,children:[t.jsx(ve,{isOpen:a.borrowBook,onClose:()=>{i({...a,borrowBook:!1})},width:"w-[600px] sm:w-[840px]",title:"Borrow Book",description:"Fill in the form below to borrow a book",children:t.jsx(ke,{form:d,onSubmit:h})}),t.jsxs("div",{className:"relative overflow-hidden rounded-md cursor-pointer",onClick:()=>{i({...a,borrowBook:!0}),d.setData("book_id",e.id)},children:[t.jsx("img",{src:e.cover,alt:e.title,width:r,height:l,className:B("h-auto w-auto object-cover transition-all hover:scale-105",o==="portrait"?"aspect-[3/4]":"aspect-square")}),t.jsx("div",{className:"absolute top-0 right-0 p-2 text-xs font-semibold text-white bg-slate-400 bg-primary-500 rounded-bl-md",children:(u=e==null?void 0:e.category)==null?void 0:u.name})]}),t.jsxs("div",{className:"space-y-1 text-sm cursor-pointer",onClick:()=>{i({...a,borrowBook:!0}),d.setData("book_id",e.id)},children:[t.jsx("h3",{className:"font-medium leading-none",children:e.title}),t.jsx("p",{className:"text-xs text-muted-foreground",children:e.author})]})]})}function ke({onSubmit:e,form:o}){return console.log("form"),console.log(o),t.jsx("div",{children:t.jsxs(xe,{className:"mt-4 border-none",children:[t.jsx(Se,{children:t.jsx(we,{children:"Book Details"})}),t.jsx(ge,{children:t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex flex-col gap-2 ",children:[t.jsx(Pe,{htmlFor:"book",children:"Return Date"}),t.jsx(je,{onChange:r=>{o.setData("return_date",r)},value:o.data.return_date})]}),t.jsx("div",{children:t.jsx(Ee,{error:o.errors.notes,type:"text",onChange:r=>{o.setData("notes",r.target.value)},label:"Notes",value:o.data.notes,placeholder:"Notes"})}),t.jsx("div",{children:t.jsx(Te,{error:o.errors.fine,label:"Book Condition Good",onChange:r=>{o.setData("fine",r)},placeholder:"Fine",value:o.data.fine,id:"bookCondition"})})]})}),t.jsx(Ce,{children:t.jsx("div",{className:"flex justify-end",children:t.jsx(me,{onClick:r=>{r.preventDefault(),e()},children:"Borrow"})})})]})})}function Be(e,[o,r]){return Math.min(r,Math.max(o,e))}function We(e,o){return c.useReducer((r,l)=>o[r][l]??r,e)}var X="ScrollArea",[Q,pr]=pe(X),[He,x]=Q(X),Z=c.forwardRef((e,o)=>{const{__scopeScrollArea:r,type:l="hover",dir:n,scrollHideDelay:s=600,...a}=e,[i,d]=c.useState(null),[h,u]=c.useState(null),[m,f]=c.useState(null),[p,v]=c.useState(null),[E,M]=c.useState(null),[g,N]=c.useState(0),[Y,_]=c.useState(0),[D,T]=c.useState(!1),[L,k]=c.useState(!1),b=R(o,j=>d(j)),S=Le(n);return t.jsx(He,{scope:r,type:l,dir:S,scrollHideDelay:s,scrollArea:i,viewport:h,onViewportChange:u,content:m,onContentChange:f,scrollbarX:p,onScrollbarXChange:v,scrollbarXEnabled:D,onScrollbarXEnabledChange:T,scrollbarY:E,onScrollbarYChange:M,scrollbarYEnabled:L,onScrollbarYEnabledChange:k,onCornerWidthChange:N,onCornerHeightChange:_,children:t.jsx(A.div,{dir:S,...a,ref:b,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":Y+"px",...e.style}})})});Z.displayName=X;var ee="ScrollAreaViewport",re=c.forwardRef((e,o)=>{const{__scopeScrollArea:r,children:l,nonce:n,...s}=e,a=x(ee,r),i=c.useRef(null),d=R(o,i,a.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(A.div,{"data-radix-scroll-area-viewport":"",...s,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});re.displayName=ee;var w="ScrollAreaScrollbar",F=c.forwardRef((e,o)=>{const{forceMount:r,...l}=e,n=x(w,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=n,i=e.orientation==="horizontal";return c.useEffect(()=>(i?s(!0):a(!0),()=>{i?s(!1):a(!1)}),[i,s,a]),n.type==="hover"?t.jsx(Ie,{...l,ref:o,forceMount:r}):n.type==="scroll"?t.jsx(Oe,{...l,ref:o,forceMount:r}):n.type==="auto"?t.jsx(oe,{...l,ref:o,forceMount:r}):n.type==="always"?t.jsx(U,{...l,ref:o}):null});F.displayName=w;var Ie=c.forwardRef((e,o)=>{const{forceMount:r,...l}=e,n=x(w,e.__scopeScrollArea),[s,a]=c.useState(!1);return c.useEffect(()=>{const i=n.scrollArea;let d=0;if(i){const h=()=>{window.clearTimeout(d),a(!0)},u=()=>{d=window.setTimeout(()=>a(!1),n.scrollHideDelay)};return i.addEventListener("pointerenter",h),i.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",h),i.removeEventListener("pointerleave",u)}}},[n.scrollArea,n.scrollHideDelay]),t.jsx(I,{present:r||s,children:t.jsx(oe,{"data-state":s?"visible":"hidden",...l,ref:o})})}),Oe=c.forwardRef((e,o)=>{const{forceMount:r,...l}=e,n=x(w,e.__scopeScrollArea),s=e.orientation==="horizontal",a=z(()=>d("SCROLL_END"),100),[i,d]=We("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return c.useEffect(()=>{if(i==="idle"){const h=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[i,n.scrollHideDelay,d]),c.useEffect(()=>{const h=n.viewport,u=s?"scrollLeft":"scrollTop";if(h){let m=h[u];const f=()=>{const p=h[u];m!==p&&(d("SCROLL"),a()),m=p};return h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[n.viewport,s,d,a]),t.jsx(I,{present:r||i!=="hidden",children:t.jsx(U,{"data-state":i==="hidden"?"hidden":"visible",...l,ref:o,onPointerEnter:P(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:P(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),oe=c.forwardRef((e,o)=>{const r=x(w,e.__scopeScrollArea),{forceMount:l,...n}=e,[s,a]=c.useState(!1),i=e.orientation==="horizontal",d=z(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;a(i?h:u)}},10);return y(r.viewport,d),y(r.content,d),t.jsx(I,{present:l||s,children:t.jsx(U,{"data-state":s?"visible":"hidden",...n,ref:o})})}),U=c.forwardRef((e,o)=>{const{orientation:r="vertical",...l}=e,n=x(w,e.__scopeScrollArea),s=c.useRef(null),a=c.useRef(0),[i,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=ae(i.viewport,i.content),u={...l,sizes:i,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function m(f,p){return Ue(f,a.current,i,p)}return r==="horizontal"?t.jsx(ze,{...u,ref:o,onThumbPositionChange:()=>{if(n.viewport&&s.current){const f=n.viewport.scrollLeft,p=K(f,i,n.dir);s.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{n.viewport&&(n.viewport.scrollLeft=f)},onDragScroll:f=>{n.viewport&&(n.viewport.scrollLeft=m(f,n.dir))}}):r==="vertical"?t.jsx(Me,{...u,ref:o,onThumbPositionChange:()=>{if(n.viewport&&s.current){const f=n.viewport.scrollTop,p=K(f,i);s.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{n.viewport&&(n.viewport.scrollTop=f)},onDragScroll:f=>{n.viewport&&(n.viewport.scrollTop=m(f))}}):null}),ze=c.forwardRef((e,o)=>{const{sizes:r,onSizesChange:l,...n}=e,s=x(w,e.__scopeScrollArea),[a,i]=c.useState(),d=c.useRef(null),h=R(o,d,s.onScrollbarXChange);return c.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),t.jsx(ne,{"data-orientation":"horizontal",...n,ref:h,sizes:r,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":O(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,m)=>{if(s.viewport){const f=s.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),ie(f,m)&&u.preventDefault()}},onResize:()=>{d.current&&s.viewport&&a&&l({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:H(a.paddingLeft),paddingEnd:H(a.paddingRight)}})}})}),Me=c.forwardRef((e,o)=>{const{sizes:r,onSizesChange:l,...n}=e,s=x(w,e.__scopeScrollArea),[a,i]=c.useState(),d=c.useRef(null),h=R(o,d,s.onScrollbarYChange);return c.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),t.jsx(ne,{"data-orientation":"vertical",...n,ref:h,sizes:r,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":O(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,m)=>{if(s.viewport){const f=s.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),ie(f,m)&&u.preventDefault()}},onResize:()=>{d.current&&s.viewport&&a&&l({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:H(a.paddingTop),paddingEnd:H(a.paddingBottom)}})}})}),[Ye,te]=Q(w),ne=c.forwardRef((e,o)=>{const{__scopeScrollArea:r,sizes:l,hasThumb:n,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:u,onResize:m,...f}=e,p=x(w,r),[v,E]=c.useState(null),M=R(o,b=>E(b)),g=c.useRef(null),N=c.useRef(""),Y=p.viewport,_=l.content-l.viewport,D=C(u),T=C(d),L=z(m,10);function k(b){if(g.current){const S=b.clientX-g.current.left,j=b.clientY-g.current.top;h({x:S,y:j})}}return c.useEffect(()=>{const b=S=>{const j=S.target;(v==null?void 0:v.contains(j))&&D(S,_)};return document.addEventListener("wheel",b,{passive:!1}),()=>document.removeEventListener("wheel",b,{passive:!1})},[Y,v,_,D]),c.useEffect(T,[l,T]),y(v,L),y(p.content,L),t.jsx(Ye,{scope:r,scrollbar:v,hasThumb:n,onThumbChange:C(s),onThumbPointerUp:C(a),onThumbPositionChange:T,onThumbPointerDown:C(i),children:t.jsx(A.div,{...f,ref:M,style:{position:"absolute",...f.style},onPointerDown:P(e.onPointerDown,b=>{b.button===0&&(b.target.setPointerCapture(b.pointerId),g.current=v.getBoundingClientRect(),N.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(b))}),onPointerMove:P(e.onPointerMove,k),onPointerUp:P(e.onPointerUp,b=>{const S=b.target;S.hasPointerCapture(b.pointerId)&&S.releasePointerCapture(b.pointerId),document.body.style.webkitUserSelect=N.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),W="ScrollAreaThumb",le=c.forwardRef((e,o)=>{const{forceMount:r,...l}=e,n=te(W,e.__scopeScrollArea);return t.jsx(I,{present:r||n.hasThumb,children:t.jsx(Xe,{ref:o,...l})})}),Xe=c.forwardRef((e,o)=>{const{__scopeScrollArea:r,style:l,...n}=e,s=x(W,r),a=te(W,r),{onThumbPositionChange:i}=a,d=R(o,m=>a.onThumbChange(m)),h=c.useRef(),u=z(()=>{h.current&&(h.current(),h.current=void 0)},100);return c.useEffect(()=>{const m=s.viewport;if(m){const f=()=>{if(u(),!h.current){const p=Ve(m,i);h.current=p,i()}};return i(),m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[s.viewport,u,i]),t.jsx(A.div,{"data-state":a.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:P(e.onPointerDownCapture,m=>{const p=m.target.getBoundingClientRect(),v=m.clientX-p.left,E=m.clientY-p.top;a.onThumbPointerDown({x:v,y:E})}),onPointerUp:P(e.onPointerUp,a.onThumbPointerUp)})});le.displayName=W;var V="ScrollAreaCorner",se=c.forwardRef((e,o)=>{const r=x(V,e.__scopeScrollArea),l=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&l?t.jsx(Fe,{...e,ref:o}):null});se.displayName=V;var Fe=c.forwardRef((e,o)=>{const{__scopeScrollArea:r,...l}=e,n=x(V,r),[s,a]=c.useState(0),[i,d]=c.useState(0),h=!!(s&&i);return y(n.scrollbarX,()=>{var m;const u=((m=n.scrollbarX)==null?void 0:m.offsetHeight)||0;n.onCornerHeightChange(u),d(u)}),y(n.scrollbarY,()=>{var m;const u=((m=n.scrollbarY)==null?void 0:m.offsetWidth)||0;n.onCornerWidthChange(u),a(u)}),h?t.jsx(A.div,{...l,ref:o,style:{width:s,height:i,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function H(e){return e?parseInt(e,10):0}function ae(e,o){const r=e/o;return isNaN(r)?0:r}function O(e){const o=ae(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,l=(e.scrollbar.size-r)*o;return Math.max(l,18)}function Ue(e,o,r,l="ltr"){const n=O(r),s=n/2,a=o||s,i=n-a,d=r.scrollbar.paddingStart+a,h=r.scrollbar.size-r.scrollbar.paddingEnd-i,u=r.content-r.viewport,m=l==="ltr"?[0,u]:[u*-1,0];return ce([d,h],m)(e)}function K(e,o,r="ltr"){const l=O(o),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,s=o.scrollbar.size-n,a=o.content-o.viewport,i=s-l,d=r==="ltr"?[0,a]:[a*-1,0],h=Be(e,d);return ce([0,a],[0,i])(h)}function ce(e,o){return r=>{if(e[0]===e[1]||o[0]===o[1])return o[0];const l=(o[1]-o[0])/(e[1]-e[0]);return o[0]+l*(r-e[0])}}function ie(e,o){return e>0&&e<o}var Ve=(e,o=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},l=0;return function n(){const s={left:e.scrollLeft,top:e.scrollTop},a=r.left!==s.left,i=r.top!==s.top;(a||i)&&o(),r=s,l=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(l)};function z(e,o){const r=C(e),l=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(l.current),[]),c.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(r,o)},[r,o])}function y(e,o){const r=C(o);be(()=>{let l=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(l),n.unobserve(e)}}},[e,r])}var de=Z,qe=re,$e=se;const ue=c.forwardRef(({className:e,children:o,...r},l)=>t.jsxs(de,{ref:l,className:B("relative overflow-hidden",e),...r,children:[t.jsx(qe,{className:"h-full w-full rounded-[inherit]",children:o}),t.jsx(q,{}),t.jsx($e,{})]}));ue.displayName=de.displayName;const q=c.forwardRef(({className:e,orientation:o="vertical",...r},l)=>t.jsx(F,{ref:l,orientation:o,className:B("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:t.jsx(le,{className:"relative flex-1 rounded-full bg-border"})}));q.displayName=F.displayName;const br=({books:e,recommendations:o})=>{var r;return console.log(e),t.jsxs(Ne,{children:[t.jsx(fe,{title:"Books"}),t.jsx(ye,{defaultValue:"music",className:"h-full space-y-6",children:t.jsxs(Re,{value:"music",className:"p-0 border-none outline-none",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"space-y-1",children:[t.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Buku"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Tingkatkan literasi Anda dengan membaca buku."})]})}),t.jsx(J,{className:"my-4"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"grid grid-cols-2 gap-2 pb-4 md:grid-cols-3 lg:grid-cols-4",children:(r=e.data)==null?void 0:r.map(l=>t.jsx(G,{book:l,className:"w-[200px] md:w-[250px]",aspectRatio:"portrait"},l.name))}),t.jsxs("div",{className:"flex flex-col items-center justify-between w-full gap-2 md:flex-row",children:[t.jsx(_e,{from:e.from,to:e.to,total:e.total}),t.jsx("div",{children:t.jsx(De,{links:e.links})})]})]}),t.jsxs("div",{className:"mt-6 space-y-1",children:[t.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Rekomendasi Buku"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Rekomendasi buku yang mungkin Anda sukai."})]}),t.jsx(J,{className:"my-4"}),t.jsx("div",{className:"relative",children:t.jsxs(ue,{children:[t.jsx("div",{className:"flex pb-4 space-x-4",children:o==null?void 0:o.map(l=>t.jsx(G,{book:l,className:"w-[150px]",aspectRatio:"portrait",width:150,height:300},l.name))}),t.jsx(q,{orientation:"horizontal"})]})})]})})]})};export{br as default};
